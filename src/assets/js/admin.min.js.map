{"version":3,"sources":["admin.js"],"names":["let","categories","document","querySelectorAll","filters","forEach","category","addEventListener","this","getAttribute","module","classList","add","remove","sections","filter","parentElement","toggle","show_if","section","closest","conditional","div","target","value","isNaN","parseInt","type","checked","style","display","show","id","querySelector","modals","actions","modal","e","getElementById","dataset","contains","window","location","hash","onload","replace","action","topbar","console","log","data","nonce","dp","jQuery","post","ajax_url","response"],"mappings":"AAGAA,IAAAC,WAAAC,SAAAC,iBAAA,iBAAA,EAqBAC,SAnBAH,WAAAI,QAAAC,IACAA,EAAAC,iBAAA,QAAA,WACAP,IAAAM,EAAAE,KAAAC,aAAA,eAAA,EAGAP,SAAAC,iBAAA,eAAA,EACAE,QAAAK,IACAA,EAAAD,aAAA,eAAA,IAAAH,EACAI,EAAAC,UAAAC,IAAA,mBAAA,EAGAF,EAAAC,UAAAE,OAAA,mBAAA,CAEA,CAAA,CACA,CAAA,CACA,CAAA,EAIAX,SAAAC,iBAAA,qBAAA,GAyBAW,UAxBAV,QAAAC,QAAAU,IACAA,EAAAR,iBAAA,QAAA,WACAC,KAAAQ,cAAAL,UAAAM,OAAA,uBAAA,CACA,CAAA,CACA,CAAA,EAoBAf,SAAAC,iBAAA,iCAAA,GAUAe,SATAJ,SAAAT,QAAAc,IACAA,EAAAZ,iBAAA,QAAA,WACAC,KAAAY,QAAA,uBAAA,EAEAT,UAAAM,OAAA,4BAAA,CACA,CAAA,CACA,CAAA,EAGAf,SAAAC,iBAAA,mBAAA,GAaA,SAAAkB,YAAAC,EAAAC,EAAAC,GAWA,WAHAA,EADA,UAJAA,EADAC,MAAAD,CAAA,EAKAA,EAJAE,SAAAF,CAAA,GAKA,CAAA,EAGAA,KACAA,EAAA,CAAA,GAGA,aAAAF,EAAAK,KACAL,EAAAM,UAAAJ,EACAD,EAAAM,MAAAC,QAAA,QAGAP,EAAAM,MAAAC,QAAA,OAIAR,EAAAE,QAAAA,EACAD,EAAAM,MAAAC,QAAA,QAGAP,EAAAM,MAAAC,QAAA,MAGA,CA3CAZ,QAAAb,QAAA0B,IACA/B,IAAAgC,EAAAD,EAAAtB,aAAA,iBAAA,EACAT,IAAAwB,EAAAO,EAAAtB,aAAA,oBAAA,EACAa,EAAApB,SAAA+B,cAAAD,CAAA,EAEAV,EAAAf,iBAAA,SAAA,WACAc,YAAAC,EAAAS,EAAAP,CAAA,CACA,CAAA,EAEAH,YAAAC,EAAAS,EAAAP,CAAA,CACA,CAAA,EAsCAxB,IAAAkC,OAAAhC,SAAAC,iBAAA,cAAA,EA+BAgC,SA9BAD,OAAA7B,QAAA,SAAA+B,GACAA,EAAA7B,iBAAA,QAAA,SAAA8B,GACArC,IAAAoC,EAAAlC,SAAAoC,eAAAD,EAAAd,OAAAgB,QAAAH,KAAA,EAEAA,IACAA,EAAAzB,UAAA6B,SAAA,gBAAA,GACAJ,EAAAzB,UAAAE,OAAA,gBAAA,EACA4B,OAAAC,SAAAC,KAAA,KAEAP,EAAAzB,UAAAC,IAAA,gBAAA,EACA6B,OAAAC,SAAAC,KAAAN,EAAAd,OAAAgB,QAAAH,OAGA,CAAA,CACA,CAAA,EAGAK,OAAAG,OAAA,WACA5C,IAAA2C,EAAAF,OAAAC,SAAAC,KACAA,IACAP,EAAAlC,SAAAoC,eAAAK,EAAAE,QAAA,IAAA,EAAA,CAAA,IAEAT,EAAAzB,UAAAC,IAAA,gBAAA,CAGA,EAKAV,SAAAC,iBAAA,eAAA,GACAgC,QAAA9B,QAAAyC,IACA9C,IAAA+C,EAAAD,EAAAb,cAAA,OAAA,EACAvB,EAAAoC,EAAArC,aAAA,aAAA,EAEAsC,EAAAxC,iBAAA,SAAA,WACAyC,QAAAC,IAAAF,CAAA,EAEA/C,IAAAkD,EAAA,CACAJ,OAAA,mBACAK,MAAAC,GAAAD,MACAzC,OAAAA,CACA,EAEA2C,OAAAC,KAAAF,GAAAG,SAAAL,EAAA,SAAAM,GACAR,QAAAC,IAAAO,CAAA,CACA,CAAA,CACA,CAAA,CACA,CAAA","file":"admin.min.js","sourcesContent":["/**\r\n * Get all data-category\r\n */\r\nlet categories = document.querySelectorAll('[data-category]');\r\n// when clicked on, search data-modules with the same data-category\r\ncategories.forEach(category => {\r\n    category.addEventListener('click', function () {\r\n        let category = this.getAttribute('data-category');\r\n\r\n        // search in all data-module for the same data-category\r\n        let modules = document.querySelectorAll('[data-module]');\r\n        modules.forEach(module => {\r\n            if (module.getAttribute('data-category') === category) {\r\n                module.classList.add('tk-module--active');\r\n            }\r\n            else {\r\n                module.classList.remove('tk-module--active');\r\n            }\r\n        });\r\n    });\r\n});\r\n\r\n\r\n// every tk-admin-filter onclick, open tk-admin-filter__subs\r\nlet filters = document.querySelectorAll('.tk-admin-filter h3');\r\nfilters.forEach(filter => {\r\n    filter.addEventListener('click', function () {\r\n        this.parentElement.classList.toggle('tk-admin-filter--open');\r\n    });\r\n});\r\n\r\n\r\n\r\n// let current_storage = JSON.parse(localStorage.getItem(dp.module));\r\n// if (current_storage) {\r\n//     current_storage.forEach(section => {\r\n//\r\n//         console.log(section);\r\n//         if( section.open === false ) {\r\n//             section.element.closest('.tk-settings__section').classList.remove('tk-settings__section--open');\r\n//         }\r\n//         else {\r\n//             section.element.closest('.tk-settings__section').classList.add('tk-settings__section--open');\r\n//         }\r\n//     });\r\n// }\r\n//\r\n\r\n\r\nlet sections = document.querySelectorAll('.tk-settings__section-header h2');\r\nsections.forEach(section => {\r\n    section.addEventListener('click', function () {\r\n        let target = this.closest('.tk-settings__section');\r\n\r\n        target.classList.toggle('tk-settings__section--open');\r\n    });\r\n});\r\n\r\n\r\nlet show_if = document.querySelectorAll('[data-show-if-id]');\r\nshow_if.forEach(show => {\r\n    let id = show.getAttribute('data-show-if-id');\r\n    let value = show.getAttribute('data-show-if-value');\r\n    let div = document.querySelector( id );\r\n\r\n    div.addEventListener('change', function () {\r\n        conditional(div, show, value);\r\n    });\r\n\r\n    conditional(div, show, value);\r\n});\r\n\r\nfunction conditional(div, target, value) {\r\n    // if value IS numer, convert to number\r\n    if ( ! isNaN(value) ) {\r\n        value = parseInt( value );\r\n    }\r\n\r\n    // is value is boolean, convert to boolean\r\n    if ( value === 'true' ) {\r\n        value = true;\r\n    }\r\n\r\n    if ( value === 'false' ) {\r\n        value = false;\r\n    }\r\n\r\n    if (div.type === 'checkbox') {\r\n        if (div.checked === value) {\r\n            target.style.display = 'block';\r\n        }\r\n        else {\r\n            target.style.display = 'none';\r\n        }\r\n    }\r\n    else {\r\n        if (div.value === value) {\r\n            target.style.display = 'block';\r\n        }\r\n        else {\r\n            target.style.display = 'none';\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nlet modals = document.querySelectorAll('[data-modal]');\r\nmodals.forEach(function (modal) {\r\n    modal.addEventListener('click', function (e) {\r\n        let modal = document.getElementById(e.target.dataset.modal);\r\n\r\n        if (modal) {\r\n            if( modal.classList.contains('tk-modal--show') ) {\r\n                modal.classList.remove('tk-modal--show');\r\n                window.location.hash = '';\r\n            }else {\r\n                modal.classList.add('tk-modal--show');\r\n                window.location.hash = e.target.dataset.modal;\r\n            }\r\n        }\r\n    });\r\n});\r\n\r\n// on document load, check if hash exists\r\nwindow.onload = function () {\r\n    let hash = window.location.hash;\r\n    if (hash) {\r\n        let modal = document.getElementById(hash.replace('#', ''));\r\n        if (modal) {\r\n            modal.classList.add('tk-modal--show');\r\n        }\r\n    }\r\n};\r\n\r\n\r\n\r\n// get all data-action\r\nlet actions = document.querySelectorAll('[data-action]');\r\nactions.forEach(action => {\r\n    let topbar = action.querySelector('input');\r\n    let module = action.getAttribute('data-module');\r\n\r\n    topbar.addEventListener('change', function () {\r\n        console.log(topbar);\r\n\r\n        let data = {\r\n            action: 'tk_save_settings',\r\n            nonce: dp.nonce,\r\n            module: module,\r\n        };\r\n\r\n        jQuery.post(dp.ajax_url, data, function (response) {\r\n            console.log(response);\r\n        });\r\n    });\r\n});\r\n\r\n\r\n\r\n\r\n//\r\n// // onchange tk-settings__topbar input\r\n// let topbar = document.querySelector('.tk-settings__topbar input');\r\n// topbar.addEventListener('change', function () {\r\n//     let data = {\r\n//         action: 'tk_save_settings',\r\n//         nonce: dp.nonce,\r\n//         module: dp.module,\r\n//     };\r\n//\r\n//     jQuery.post(dp.ajax_url, data, function (response) {\r\n//         console.log(response);\r\n//     });\r\n//\r\n// });\r\n\r\n\r\n\r\n// /**\r\n//  * Save the settings\r\n//  */\r\n// let ajax_url = dp.ajax_url;\r\n// let nonce = dp.nonce;\r\n// /**\r\n//  * Get all divs that have \"data-module and data-slug\" attributes\r\n//  */\r\n// let modules = document.querySelectorAll('[data-module]');\r\n// /**\r\n//  * Loop through all modules\r\n//  */\r\n// modules.forEach(module_item => {\r\n//     let module = module_item.getAttribute('data-module');\r\n//\r\n//     let data = {\r\n//         action: 'tk_save_settings',\r\n//         nonce: nonce,\r\n//         module: module\r\n//     };\r\n//\r\n//     // onclick on button inside element\r\n//     module_item.querySelector('.button').addEventListener('click', function () {\r\n//         jQuery.post(ajax_url, data, function (response) {\r\n//             document.querySelector('.js-tk-tabs').innerHTML = response.data.tabs;\r\n//\r\n//             module_item.querySelector('.button').innerHTML = response.data.status;\r\n//             // module_item.classList.toggle('tk-modules__item__status--active');\r\n//\r\n//         });\r\n//     });\r\n//\r\n//     // module_item.addEventListener('click', function () {\r\n//     //     jQuery.post(ajax_url, data, function (response) {\r\n//     //         document.querySelector('.js-tk-tabs').innerHTML = response.data.tabs;\r\n//     //\r\n//     //         module_item.querySelector('.button').innerHTML = response.data.status;\r\n//     //         // module_item.classList.toggle('tk-modules__item__status--active');\r\n//     //\r\n//     //     });\r\n//     // });\r\n// });\r\n//\r\n//\r\n// // document.getElementById(\"first\").onsubmit = function() {demo()};\r\n// // function demo() {\r\n// //     alert(\"The form was submitted successfully\");\r\n// // }\r\n//\r\n// /**\r\n//  * When form tk-upload-config is submitted\r\n//  */\r\n// document.querySelector('.tk-modules').addEventListener('submit', function (e) {\r\n//     e.preventDefault();\r\n//\r\n//     let config = document.querySelector('textarea[name=\"config\"]').value;\r\n//\r\n//     // /**\r\n//     //  * Check if config is empty\r\n//     //  * @type {{action: string, nonce: (*|string), config: any}}\r\n//     //  */\r\n//     // if (config === '') {\r\n//     //     document.querySelector('.tk-config__message').classList.add('tk-config__message--active');\r\n//     //     document.querySelector('.tk-config__message').innerHTML = 'Please enter a valid JSON config';\r\n//     //     return;\r\n//     // }\r\n//     //\r\n//     // /**\r\n//     //  * Check if type of config is not object\r\n//     //  * @type {{action: string, nonce: (*|string), config: any}}\r\n//     //  */\r\n//     // if (typeof JSON.parse(config) !== 'object') {\r\n//     //     document.querySelector('.tk-config__message').classList.add('tk-config__message--active');\r\n//     //     document.querySelector('.tk-config__message').innerHTML = 'Please enter a valid JSON config';\r\n//     //     return;\r\n//     // }\r\n//\r\n//\r\n//     let data = {\r\n//         action: 'tk_save_config',\r\n//         nonce: nonce,\r\n//         config: JSON.parse(config)\r\n//     };\r\n//\r\n//     jQuery.post(ajax_url, data, function (response) {\r\n//         // document.querySelector('.tk-config__message').classList.add('tk-config__message--active');\r\n//         // document.querySelector('.tk-config__message').innerHTML = response.data.message;\r\n//     });\r\n// });\r\n//\r\n//\r\n//\r\n//\r\n// let debounceTimeout;\r\n//\r\n// // every data-form\r\n// let forms = document.querySelectorAll('[data-form]');\r\n// console.log(forms);\r\n//\r\n// forms.forEach(form => {\r\n//\r\n//\r\n//     const inputs = form.querySelectorAll(`input:not([type=\"hidden\"]), select`);\r\n//     inputs.forEach(function (input) {\r\n//         input.addEventListener('keypress', function (e) {\r\n//             if (e.key === 'Enter') {\r\n//                 e.preventDefault();\r\n//             }\r\n//         });\r\n//\r\n//         if( input.getAttribute('type') === 'search' || input.getAttribute('type') === 'text' ) {\r\n//             input.addEventListener('input', function () {\r\n//\r\n//                 debounceTimeout = setTimeout(() => {\r\n//                     console.log(777);\r\n//                 }, 300);\r\n//             });\r\n//         }\r\n//\r\n//         else {\r\n//             input.addEventListener('change', function () {\r\n//                 console.log(22);\r\n//             });\r\n//         }\r\n//     });\r\n// });\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n// function test() {\r\n//\r\n//     let data = {\r\n//         action: 'tk_save_settings',\r\n//         nonce: nonce,\r\n//         module: module\r\n//     };\r\n//\r\n// }\r\n//\r\n//\r\n// //\r\n// //\r\n// // function formValidation(event) {\r\n// //\r\n// //\r\n// //\r\n// //     console.log(11);\r\n// //     return;\r\n// //     let data = {\r\n// //         action: 'tk_save_config',\r\n// //         nonce: nonce,\r\n// //         config: JSON.parse(config)\r\n// //     };\r\n// //\r\n// //     jQuery.post(ajax_url, data, function (response) {\r\n// //         console.log(response);\r\n// //     });\r\n// // }\r\n//\r\n// //\r\n// //\r\n// //\r\n// //\r\n// //\r\n// //\r\n// // var $tabs = jQuery( '.nav-tab-wrapper' );\r\n// // var $panes = jQuery( '.content-column .tab-content' );\r\n// //\r\n// // $tabs.find( '.nav-tab-active' ).removeClass( 'nav-tab-active' );\r\n// // $panes.find( '.tab-pane.active' ).removeClass( 'active' );\r\n// //\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//     //\r\n//     //\r\n//     //\r\n//     //\r\n//     //     var $tabs = jQuery( '.nav-tab-wrapper' );\r\n//     //     var $panes = jQuery( '.content-column .tab-content' );\r\n//     //\r\n//     // $tabs.find( '.nav-tab-active' ).removeClass( 'nav-tab-active' );\r\n//     // $panes.find( '.tab-pane.active' ).removeClass( 'active' );\r\n//     //\r\n//     //     $tabs.find( 'a' ).on(\r\n//     //         'click.redis-cache',\r\n//     //         function ( event ) {\r\n//     //             var toggle = jQuery( this ).data( 'toggle' );\r\n//     //\r\n//     //             jQuery( this ).blur();\r\n//     //\r\n//     //             show_tab( toggle );\r\n//     //\r\n//     //             if ( history.pushState ) {\r\n//     //                 history.pushState( null, null, '#' + toggle );\r\n//     //             }\r\n//     //\r\n//     //             return false;\r\n//     //         }\r\n//     //     );\r\n//     //\r\n//     //     console.log(11);\r\n//     //\r\n//     //     var firstRender = window.location.hash.indexOf('metrics') === -1;\r\n//     //\r\n//     //     var show_tab = function ( name ) {\r\n//     //         $tabs.find( '.nav-tab-active' ).removeClass( 'nav-tab-active' );\r\n//     //         $panes.find( '.tab-pane.active' ).removeClass( 'active' );\r\n//     //\r\n//     //         jQuery( '#' + name + '-tab' ).addClass( 'nav-tab-active' );\r\n//     //         jQuery( '#' + name + '-pane' ).addClass( 'active' );\r\n//     //\r\n//     //         if (name === 'metrics' && firstRender) {\r\n//     //             firstRender = false;\r\n//     //         }\r\n//     //     };\r\n//     //\r\n//     //     var show_current_tab = function () {\r\n//     //         var tabHash = window.location.hash.replace( '#', '' );\r\n//     //\r\n//     //         if ( tabHash !== '' && jQuery( '#' + tabHash + '-tab' ) ) {\r\n//     //             show_tab( tabHash );\r\n//     //         }\r\n//     //     };\r\n//     //\r\n//     //     show_current_tab();\r\n//     //\r\n//     //     jQuery( window ).on( 'hashchange', show_current_tab );\r\n//     //\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n// // /**\r\n// //  * Save the settings\r\n// //  */\r\n// // function tk_save_settings(slug, status) {\r\n// //\r\n// //     let data = {\r\n// //         action: 'tk_save_settings',\r\n// //         nonce: nonce,\r\n// //\r\n// //             slug: slug,\r\n// //             status: status\r\n// //\r\n// //     };\r\n// //     jQuery.post(ajax_url, data, function (response) {\r\n// //         console.log(response);\r\n// //     });\r\n// // }"]}